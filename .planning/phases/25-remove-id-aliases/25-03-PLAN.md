---
phase: 25-remove-id-aliases
plan: 03
type: execute
---

<objective>
Replace mercId/mercName/dictatorId/dictatorName with combatantId/combatantName in UI layer and tests.

Purpose: Complete the rename across all remaining code.
Output: All Vue components and test files use combatantId/combatantName.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary-frontmatter.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/25-remove-id-aliases/25-02-SUMMARY.md

**Depends on:** Plan 25-02 (rules layer updated)

**Scope:**
- UI layer: 60 occurrences across 9 files in src/ui/
- Tests: 95 occurrences across 6 files in tests/

**Files to update:**

UI (by occurrence count):
- SectorPanel.vue: 15
- GameBoard.vue: 12
- DictatorPanel.vue: 11
- SectorTile.vue: 7
- CombatantIcon.vue: 4
- CombatPanel.vue: 4
- CombatantIconSmall.vue: 3
- SquadPanel.vue: 2
- App.vue: 2

Tests (by occurrence count):
- merc-abilities-integration.test.ts: 75
- error-conditions.test.ts: 7
- team-limit.test.ts: 6
- combat-abilities.test.ts: 4
- hagness-vulture.test.ts: 2
- smoke.test.ts: 1

**Special UI considerations:**
- Vue template bindings use different syntax (`:merc-id` props, `@merc.mercId`)
- GameView attributes come from server as `mercId` - need to check attribute access patterns
- Some use `getAttr(item, 'mercId')` pattern
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Vue components</name>
  <files>src/ui/components/*.vue, src/ui/App.vue</files>
  <action>
In all Vue files, replace:
- `.mercId` → `.combatantId`
- `.mercName` → `.combatantName`
- `.dictatorId` → `.combatantId`
- `.dictatorName` → `.combatantName`

Also update:
- Template bindings: `:merc-id` stays as prop name (external interface), but internal references use combatantId
- `getAttr(item, 'mercId')` → `getAttr(item, 'combatantId')`
- `attributes?.mercId` → `attributes?.combatantId`
- String literals `'mercId'` → `'combatantId'`

Special cases:
- Props named `mercId` in component interfaces should be renamed if they're internal
- External-facing props (like `:merc-id`) may need to stay for API compatibility OR be updated across the board

For CombatantCard.vue, CombatantIcon.vue, CombatantIconSmall.vue:
- These already use "combatant" naming, likely just need property access updates

For GameBoard.vue, SectorPanel.vue:
- These heavily use mercId for identification in templates
- Update all internal references
  </action>
  <verify>`npm run build` passes</verify>
  <done>All Vue components use combatantId/combatantName internally</done>
</task>

<task type="auto">
  <name>Task 2: Update test files</name>
  <files>tests/*.test.ts</files>
  <action>
In all test files, replace:
- `.mercId` → `.combatantId`
- `.mercName` → `.combatantName`
- `.dictatorId` → `.combatantId`
- `.dictatorName` → `.combatantName`

The merc-abilities-integration.test.ts has 75 occurrences - mostly testing merc abilities by ID.
Update assertions like:
- `merc.mercId === 'haarg'` → `merc.combatantId === 'haarg'`
- `expect(merc.mercName).toBe(...)` → `expect(merc.combatantName).toBe(...)`
  </action>
  <verify>`npm test` passes all tests</verify>
  <done>All tests use combatantId/combatantName</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm test` passes all tests
- [ ] `grep -r "\.mercId\|\.mercName\|\.dictatorId\|\.dictatorName" src/ui/ tests/` returns no matches
</verification>

<success_criteria>
- All Vue components use combatantId/combatantName
- All tests use combatantId/combatantName
- No usages of .mercId, .mercName, .dictatorId, .dictatorName in UI or tests
- Build and tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/25-remove-id-aliases/25-03-SUMMARY.md`
</output>
