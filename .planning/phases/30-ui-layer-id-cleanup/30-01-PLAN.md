---
phase: 30-ui-layer-id-cleanup
plan: 01
type: execute
---

<objective>
Update UI component interfaces and type definitions to use combatantName instead of mercName/dictatorName.

Purpose: Align UI layer types with the canonical combatantName identity used in the rules layer.
Output: Clean interface definitions without legacy mercName/dictatorName properties.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/29-rules-layer-id-cleanup/29-02-SUMMARY.md

**Prior context:**
- Phase 29 completed rules layer cleanup (mercId → combatantId)
- UI layer uses mercName/dictatorName in interface properties and fallback chains
- Pattern: Replace interface properties, preserve fallback chains for backward compatibility in runtime data

**Scope:**
- CombatantCard.vue: 1 interface property (MercData.mercName)
- SectorTile.vue: 1 interface property (MercInSector.mercName)
- SquadPanel.vue: 1 interface property (MercData.mercName)
- MapGrid.vue: 1 interface property (MercData.mercName)
- DictatorPanel.vue: 1 props interface property (dictator.dictatorName)
- SectorPanel.vue: 1 props interface property (allMercsInSector[].mercName)
- GameBoard.vue: props interface already uses combatantName (no interface changes needed)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update CombatantCard.vue interface</name>
  <files>src/ui/components/CombatantCard.vue</files>
  <action>
In the MercData interface (lines 14-40), rename property `mercName?: string` to `combatantName?: string`.

Do NOT change:
- The computed `mercName` variable (line 78) - this is a local variable name
- The template reference `{{ mercName }}` - this refers to the computed
- The fallback chain in the computed - runtime data may still use mercName
  </action>
  <verify>grep -n "combatantName" src/ui/components/CombatantCard.vue | head -5</verify>
  <done>MercData interface has combatantName property instead of mercName</done>
</task>

<task type="auto">
  <name>Task 2: Update SectorTile.vue, SquadPanel.vue, MapGrid.vue interfaces</name>
  <files>src/ui/components/SectorTile.vue, src/ui/components/SquadPanel.vue, src/ui/components/MapGrid.vue</files>
  <action>
In each file's MercData/MercInSector interface, rename property `mercName?: string` to `combatantName?: string`:

1. SectorTile.vue (MercInSector interface, ~line 24): `mercName?: string` → `combatantName?: string`
2. SquadPanel.vue (MercData interface, ~line 10): `mercName?: string` → `combatantName?: string`
3. MapGrid.vue (MercData interface, ~line 20): `mercName: string` → `combatantName: string`

Do NOT change fallback chains in getMercKey functions or template references - those handle runtime compatibility.
  </action>
  <verify>grep -n "combatantName.*string" src/ui/components/SectorTile.vue src/ui/components/SquadPanel.vue src/ui/components/MapGrid.vue</verify>
  <done>All three component interfaces use combatantName instead of mercName</done>
</task>

<task type="auto">
  <name>Task 3: Update DictatorPanel.vue and SectorPanel.vue interfaces</name>
  <files>src/ui/components/DictatorPanel.vue, src/ui/components/SectorPanel.vue</files>
  <action>
1. DictatorPanel.vue (props interface, ~line 44):
   - Change `dictatorName: string` to `combatantName: string`
   - The interface already has combatantId, add combatantName as required
   - Keep dictatorName as optional for backward compat: `dictatorName?: string`

2. SectorPanel.vue (allMercsInSector interface, ~line 39):
   - Change `mercName?: string` to `combatantName?: string`
   - Interface already has combatantId pattern from prior work

Do NOT change template fallback chains - those handle runtime compatibility.
  </action>
  <verify>grep -n "combatantName" src/ui/components/DictatorPanel.vue src/ui/components/SectorPanel.vue | head -10</verify>
  <done>DictatorPanel and SectorPanel props interfaces use combatantName</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without TypeScript errors
- [ ] `npm test` passes (no breaking changes to runtime behavior)
- [ ] All 6 component interfaces now have combatantName property
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Interface definitions use combatantName as the primary property
- No TypeScript errors introduced
</success_criteria>

<output>
After completion, create `.planning/phases/30-ui-layer-id-cleanup/30-01-SUMMARY.md`
</output>
