---
phase: 20-model-renaming
plan: 02
type: execute
---

<objective>
Update all imports, exports, and type references to use CombatantModel and CombatantBase.

Purpose: Complete the model renaming by updating all files that reference the old class names.

Output: All files use CombatantModel/CombatantBase, exports updated, type references updated.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/20-model-renaming/20-01-SUMMARY.md

**Depends on:** Plan 20-01 (CombatantBase/CombatantModel classes exist)

**Files with CombatUnitCard references (16 total):**
- src/rules/elements.ts (already done in 20-01)
- src/rules/index.ts - exports
- src/rules/game.ts - type annotations
- src/rules/combat.ts - type annotations
- src/rules/combat-types.ts - type definitions
- src/rules/merc-abilities.ts - type annotations
- src/rules/ai-helpers.ts - type annotations

**Files with CombatUnit references:**
- Multiple files use CombatUnit for type annotations
- These should reference CombatantBase where appropriate
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update exports in index.ts</name>
  <files>src/rules/index.ts</files>
  <action>
    1. Add exports for new class names: CombatantBase, CombatantModel
    2. Keep existing exports (MercCard, DictatorCard) - they still exist
    3. Add re-export aliases for backward compat if needed: `export { CombatantBase as CombatUnit, CombatantModel as CombatUnitCard }`

    This ensures external code that imports CombatUnitCard still works.
  </action>
  <verify>`npx tsc --noEmit` passes</verify>
  <done>index.ts exports CombatantBase, CombatantModel, and backward-compat aliases</done>
</task>

<task type="auto">
  <name>Task 2: Update type imports in rules layer files</name>
  <files>src/rules/game.ts, src/rules/combat.ts, src/rules/combat-types.ts, src/rules/merc-abilities.ts, src/rules/setup.ts</files>
  <action>
    Update imports in each file:
    1. game.ts: Import CombatantModel if using it for type annotations
    2. combat.ts: Update any CombatUnit/CombatUnitCard type annotations to use CombatantBase/CombatantModel
    3. combat-types.ts: Update type definitions to reference CombatantBase/CombatantModel
    4. merc-abilities.ts: Update type annotations
    5. setup.ts: Update any type references

    Use find-replace carefully. Most usages are in type annotations like `CombatUnit[]` or parameters.

    Keep MercCard/DictatorCard imports where they're needed for `.all(MercCard)` queries.
  </action>
  <verify>`npx tsc --noEmit` passes</verify>
  <done>All rules layer files use CombatantBase/CombatantModel in type annotations</done>
</task>

<task type="auto">
  <name>Task 3: Update type imports in action files</name>
  <files>src/rules/actions/helpers.ts, src/rules/actions/rebel-movement.ts, src/rules/actions/rebel-combat.ts, src/rules/actions/rebel-economy.ts, src/rules/actions/rebel-equipment.ts, src/rules/actions/dictator-actions.ts, src/rules/actions/day-one-actions.ts</files>
  <action>
    Update imports in each action file:
    1. Change `import { CombatUnit }` → `import { CombatantBase }`
    2. Change `import { CombatUnitCard }` → `import { CombatantModel }`
    3. Update any type annotations in function signatures

    Keep MercCard/DictatorCard imports where they're needed for specific class queries.
  </action>
  <verify>`npx tsc --noEmit` passes</verify>
  <done>All action files use CombatantBase/CombatantModel in imports and type annotations</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes with no errors
- [ ] `npm test` passes (all existing tests work)
- [ ] All src/rules/*.ts files use CombatantBase/CombatantModel
- [ ] Backward-compat re-exports exist in index.ts
</verification>

<success_criteria>
- All imports updated to use new class names
- Backward-compat exports maintained
- TypeScript compiles without errors
- All tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/20-model-renaming/20-02-SUMMARY.md`
</output>
