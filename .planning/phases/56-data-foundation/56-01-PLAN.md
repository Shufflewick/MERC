---
phase: 56-data-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - data/combatants.json
  - src/rules/index.ts
  - src/rules/dictator-abilities.ts
autonomous: true

must_haves:
  truths:
    - "All 9 expansion dictators exist in combatants.json with correct stats"
    - "Lobby dropdown shows all 11 dictators (Random + 2 existing + 9 new)"
    - "DictatorAbilityType includes all 11 dictator IDs"
    - "Selecting any expansion dictator starts a game without errors"
  artifacts:
    - path: "data/combatants.json"
      provides: "9 new dictator entries with stats, abilities, bios, images"
      contains: "gadafi.*cardType.*dictator"
    - path: "src/rules/index.ts"
      provides: "Lobby dropdown choices for all 11 dictators"
      contains: "stalin"
    - path: "src/rules/dictator-abilities.ts"
      provides: "Expanded DictatorAbilityType union"
      contains: "gadafi.*hitler.*hussein.*mao.*mussolini.*noriega.*pinochet.*polpot.*stalin"
  key_links:
    - from: "data/combatants.json"
      to: "public/dictators/*.png"
      via: "image field path must match existing filenames"
      pattern: "/dictators/(gadafi|hitler|hussein|mao|mussolini|noriega|pinochet|polpot|stalin)\\.png"
    - from: "src/rules/index.ts"
      to: "data/combatants.json"
      via: "choices value must match combatant id"
      pattern: "value: '(gadafi|hitler|hussein|mao|mussolini|noriega|pinochet|polpot|stalin)'"
---

<objective>
Add all 9 expansion dictators to the game data and make them selectable in the lobby.

Purpose: This is the data foundation for the entire v2.1 expansion. All subsequent phases (57-62) depend on these dictator entries existing. No ability logic is implemented -- new dictators function as stat-only combatants because the existing `default` cases in ability dispatchers handle unknown dictators gracefully.

Output: 9 new dictator entries in combatants.json, 9 new lobby dropdown choices, expanded DictatorAbilityType.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/56-data-foundation/56-RESEARCH.md
@data/combatants.json
@data/expansion dictators.csv
@src/rules/index.ts
@src/rules/dictator-abilities.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add 9 expansion dictators to game data</name>
  <files>data/combatants.json, src/rules/index.ts, src/rules/dictator-abilities.ts</files>
  <action>
**1. Add 9 dictator entries to `data/combatants.json`**

Append 9 new entries after the existing Kim entry (end of file), following the exact same JSON structure as Castro and Kim. Use data from `data/expansion dictators.csv`.

CRITICAL ID/image rules (from research):
- Use `gadafi` as ID (NOT `gaddafi`) -- matches existing image `public/dictators/gadafi.png`
- Use `polpot` as ID (NOT `pol-pot` or `pol_pot`) -- matches existing image `public/dictators/polpot.png`
- All other IDs are lowercase name: `hitler`, `hussein`, `mao`, `mussolini`, `noriega`, `pinochet`, `stalin`

For each dictator, use this exact format:
```json
{
  "id": "{id}",
  "cardType": "dictator",
  "name": "{Display Name}",
  "quantity": 1,
  "training": {training from CSV},
  "combat": {combat from CSV},
  "initiative": {initiative from CSV},
  "ability": "{ability text from CSV -- use the CSV text exactly, it is the canonical game-card text}",
  "bio": "{bio from CSV}",
  "image": "/dictators/{id}.png",
  "sex": "M"
}
```

The 9 dictators and their stats (from CSV):
| ID | Name | Init | Combat | Training |
|----|------|------|--------|----------|
| gadafi | Gaddafi | 2 | 2 | 2 |
| hitler | Hitler | 0 | 3 | 3 |
| hussein | Hussein | 4 | 1 | 1 |
| mao | Mao | 2 | 1 | 3 |
| mussolini | Mussolini | 3 | 0 | 3 |
| noriega | Noriega | 1 | 4 | 1 |
| pinochet | Pinochet | 1 | 3 | 2 |
| polpot | Pol Pot | 2 | 2 | 2 |
| stalin | Stalin | 2 | 3 | 1 |

Note: For Hitler's bio, use the proper Unicode: "Fuhrer" with umlaut as it appears in the CSV.

**2. Add 9 dictator choices to lobby dropdown in `src/rules/index.ts`**

In the `dictatorCharacter.choices` array (around line 202), add entries after the existing Kim entry. Use this format with a short ability summary:

```typescript
{ value: 'gadafi', label: 'Gaddafi - Hire MERCs + loot equipment' },
{ value: 'hitler', label: 'Hitler - Hire MERCs + auto-initiative' },
{ value: 'hussein', label: 'Hussein - Extra tactics cards' },
{ value: 'mao', label: 'Mao - Starting MERCs + wilderness militia' },
{ value: 'mussolini', label: 'Mussolini - Starting MERCs + militia spread' },
{ value: 'noriega', label: 'Noriega - Convert rebel militia + conditional hire' },
{ value: 'pinochet', label: 'Pinochet - Hire on sector loss + damage spread' },
{ value: 'polpot', label: 'Pol Pot - Militia to rebel sectors + combat hire' },
{ value: 'stalin', label: 'Stalin - Hire MERCs to both squads' },
```

**3. Expand `DictatorAbilityType` in `src/rules/dictator-abilities.ts`**

Change line 26 from:
```typescript
export type DictatorAbilityType = 'castro' | 'kim';
```
to:
```typescript
export type DictatorAbilityType =
  | 'castro' | 'kim'
  | 'gadafi' | 'hitler' | 'hussein' | 'mao'
  | 'mussolini' | 'noriega' | 'pinochet' | 'polpot' | 'stalin';
```
  </action>
  <verify>
1. `npx tsc --noEmit` passes with no errors
2. `grep -c '"cardType": "dictator"' data/combatants.json` returns 11
3. `grep -c "value: '" src/rules/index.ts` in the choices array returns 12 (Random + 11 dictators)
4. JSON is valid: `node -e "JSON.parse(require('fs').readFileSync('data/combatants.json','utf8'))"`
  </verify>
  <done>
- combatants.json has 11 dictator entries (2 existing + 9 new) with correct stats matching CSV
- Lobby dropdown has 12 choices (Random + 11 dictators) with descriptive labels
- DictatorAbilityType includes all 11 dictator IDs
- TypeScript compiles cleanly
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify expansion dictators work in-game</name>
  <files></files>
  <action>
Run the existing test suite to confirm nothing is broken by the data additions. The existing code paths (setup, selection, ability dispatchers) should handle the new dictators via their dynamic data reading and `default` switch cases.

1. Run `npm test` (or the project's test command) to verify all existing tests pass
2. If any tests reference a hardcoded count of dictators or combatants, they may need updating -- but only update counts, do not change test logic
3. Verify each new dictator ID matches an existing image file: check that `public/dictators/{id}.png` exists for all 9 IDs (gadafi, hitler, hussein, mao, mussolini, noriega, pinochet, polpot, stalin)
  </action>
  <verify>
1. All existing tests pass
2. All 9 image files confirmed to exist in `public/dictators/`
  </verify>
  <done>
- Test suite passes with no regressions
- All 9 expansion dictator image files verified to exist
- Expansion dictators are safe to select in-game (no crashes from missing data or broken code paths)
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `npx tsc --noEmit`
2. Tests pass: `npm test`
3. JSON valid: `node -e "JSON.parse(require('fs').readFileSync('data/combatants.json','utf8'))"`
4. Dictator count: 11 entries with cardType "dictator" in combatants.json
5. Lobby choices: 12 entries in dictatorCharacter.choices (Random + 11 dictators)
6. Image files: all 9 new dictator images exist in public/dictators/
</verification>

<success_criteria>
- All 9 expansion dictators appear in combatants.json with stats matching the CSV
- Game lobby presents all 11 dictators for selection
- Selecting any expansion dictator does not crash (verified by tests passing)
- DictatorAbilityType is ready for future phases to implement abilities
</success_criteria>

<output>
After completion, create `.planning/phases/56-data-foundation/56-01-SUMMARY.md`
</output>
