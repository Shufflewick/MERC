---
phase: 33
plan: 03
wave: 2
depends_on: [33-01, 33-02]
files_modified:
  - src/ui/components/GameBoard.vue
autonomous: true
---

# Plan 03: Integrate New Components into GameBoard.vue

## Objective

Update GameBoard.vue to use the newly created GameOverOverlay.vue and LandingZoneSelection.vue components. Remove the extracted template and style code, reducing GameBoard.vue complexity.

## Context

**Source:** GameBoard.vue (currently ~1,808 lines)

**Components to integrate:**
- GameOverOverlay.vue (from 33-01)
- LandingZoneSelection.vue (from 33-02)

**Expected reduction:** ~80-100 lines of template and styles

**Design Note:** LandingZoneSelection provides a card-based sector picker that works alongside the existing map interaction. Users can select landing zones by either:
1. Clicking sector cards in the LandingZoneSelection component
2. Clicking directly on highlighted sectors on the map

The map highlighting remains functional via the `landingSectors` computed (used by `clickableSectors`). This dual-selection approach improves UX by showing sector details in cards while preserving familiar map interaction.

## Tasks

<task id="1">
Add imports for the new components at the top of the script section:

```typescript
import GameOverOverlay from './GameOverOverlay.vue';
import LandingZoneSelection from './LandingZoneSelection.vue';
```

Place after existing component imports (around line 16).
</task>

<task id="2">
Replace the game over overlay inline template (lines 989-1002) with the component:

**Before:**
```html
<!-- Game Over Overlay - shown when game ends -->
<div v-if="isGameOver" class="game-over-overlay">
  <div class="game-over-content">
    <h1 class="game-over-title">Game Over</h1>
    <div v-if="gameWinner === 'rebels'" class="game-over-winner rebels">
      <h2>Rebels Victory!</h2>
      <p>The dictator has been eliminated. Freedom prevails!</p>
    </div>
    <div v-else class="game-over-winner dictator">
      <h2>Dictator Victory!</h2>
      <p>The rebellion has been crushed. Order is restored.</p>
    </div>
  </div>
</div>
```

**After:**
```html
<!-- Game Over Overlay -->
<GameOverOverlay
  :is-visible="isGameOver"
  :winner="gameWinner"
/>
```
</task>

<task id="3">
Update the landing zone display in the map section (lines 1204-1207).

**Before (lines 1204-1207):**
```html
<h2 v-if="isPlacingLanding" class="action-title">Choose Landing Zone</h2>
<p v-if="isPlacingLanding" class="action-subtitle">Select an edge sector for your landing</p>
```

**After:**
```html
<!-- Landing Zone Selection - shown above map during landing phase -->
<LandingZoneSelection
  v-if="isPlacingLanding"
  :sectors="sectors"
  @sector-selected="handleLandingSectorSelected"
/>
```

Note: The MapGrid below will still be visible but the title/subtitle move into the component.
</task>

<task id="4">
Add a handler for the landing zone selection event. Add this near the existing `handleSectorClick` function:

```typescript
// Handle landing sector selection from LandingZoneSelection component
async function handleLandingSectorSelected(sectorId: string) {
  // Delegate to existing handleSectorClick logic for landing
  await handleSectorClick(sectorId);
}
```

This preserves the existing landing action execution logic in handleSectorClick.
</task>

<task id="5">
Remove the game over overlay styles from the style section (lines ~1927-1996).

Remove these CSS rules:
- `.game-over-overlay`
- `@keyframes fadeIn` (if only used by game over)
- `.game-over-content`
- `@keyframes slideUp`
- `.game-over-title`
- `.game-over-winner`
- `.game-over-winner h2`
- `.game-over-winner p`
- `.game-over-winner.rebels h2`
- `.game-over-winner.dictator h2`

These are now in GameOverOverlay.vue.
</task>

<task id="6">
Verify the game runs correctly:

```bash
npm run dev
```

Test in browser:
- Start a new game
- Verify landing zone selection appears during landing phase
- Click a sector card to place landing
- Play until game ends
- Verify game over overlay displays correctly
- Check both rebel and dictator victory scenarios work
</task>

<task id="7">
Verify TypeScript compiles:

```bash
npx tsc --noEmit
```
</task>

<task id="8">
Count lines to verify reduction:

```bash
wc -l src/ui/components/GameBoard.vue
```

Target: Reduced by ~80-100 lines from template and styles.
</task>

## Verification

<verify>
1. Both new components imported in GameBoard.vue
2. GameOverOverlay component used in template with correct props
3. LandingZoneSelection component used in map section with event handler
4. Game over styles removed from GameBoard.vue style section
5. Landing zone title/subtitle removed from inline template
6. `landingSectors` computed KEPT (required for map highlighting via clickableSectors)
7. TypeScript compiles without errors
8. Game runs without runtime errors:
   - Landing phase works correctly
   - Game over overlay displays correctly
   - Both victory conditions display properly
9. GameBoard.vue line count reduced
</verify>

## Must Haves

- [ ] GameOverOverlay.vue imported and used
- [ ] LandingZoneSelection.vue imported and used
- [ ] `handleLandingSectorSelected` handler added and wired
- [ ] Game over inline template replaced with component
- [ ] Landing zone prompt replaced with component
- [ ] Game over styles removed from GameBoard.vue (~70 lines)
- [ ] No TypeScript errors
- [ ] No runtime errors in browser console
- [ ] Landing zone selection still works correctly
- [ ] Game over display still works correctly
- [ ] Game remains fully playable
