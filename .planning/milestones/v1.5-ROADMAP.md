# Milestone v1.5: Final Combatant Unification

**Status:** âœ… SHIPPED 2026-01-15
**Phases:** 24-27
**Total Plans:** 7

## Overview

Eliminated MercCard/DictatorCard subclasses entirely, unifying on single CombatantModel class with cardType discriminator. Removed all ID aliases (mercId/mercName, dictatorId/dictatorName) leaving only combatantId/combatantName. Cleaned up backward-compat exports.

## Phases

### Phase 24: Merge Classes

**Goal**: Collapse MercCard/DictatorCard into CombatantModel, eliminating class hierarchy
**Depends on**: Previous milestone complete
**Plans**: 1 plan

Plans:
- [x] 24-01: Make CombatantModel concrete with unified ID properties

**Details:**
Made CombatantModel a concrete class with _combatantId/_combatantName properties. MercCard/DictatorCard became thin wrappers delegating to parent with backward-compat fallbacks.

### Phase 25: Remove ID Aliases

**Goal**: Eliminate mercId/mercName, dictatorId/dictatorName, unitId/unitName - only combatantId/combatantName
**Depends on**: Phase 24
**Plans**: 4 plans

Plans:
- [x] 25-01: Core class changes (elements.ts, game.ts, setup.ts with backward-compat getters)
- [x] 25-02: Rules layer updates (324 occurrences across 21 files)
- [x] 25-03: UI and Tests updates (155 occurrences across 15 files)
- [x] 25-04: Remove backward-compat getters and update documentation

**Details:**
Systematically replaced all alias properties with combatantId/combatantName across the entire codebase. Temporary backward-compat getters allowed incremental migration before final removal.

### Phase 26: Update References

**Goal**: Fix all imports, type annotations, instanceof checks, and tests
**Depends on**: Phase 25
**Plans**: 1 plan

Plans:
- [x] 26-01: Remove backward-compat exports, replace union types with CombatantModel

**Details:**
Removed backward-compat type aliases (CombatantCard, UnitCard). Replaced inline union types (MercCard | DictatorCard) with CombatantModel throughout.

### Phase 27: Documentation

**Goal**: Update CLAUDE.md, remove dead code, verify no regressions
**Depends on**: Phase 26
**Plans**: 1 plan

Plans:
- [x] 27-01: Update documentation for v1.5 completion

**Details:**
Updated type annotations to use CombatantModel. Marked milestone complete in ROADMAP and STATE. Updated PROJECT.md validated requirements.

---

## Milestone Summary

**Key Decisions:**

- Made CombatantModel concrete (removed abstract) with direct combatantId/combatantName properties
- Preserved MercCard/DictatorCard classes for BoardSmith classRegistry compatibility but they're now thin wrappers
- Removed all ID aliases (mercId/mercName/dictatorId/dictatorName/unitId/unitName)
- Clean exports only - no backward-compat aliases

**Issues Resolved:**

- MercCard/DictatorCard class hierarchy complexity eliminated
- ID property confusion resolved (single source of truth)
- Type union proliferation cleaned up

**Issues Deferred:**

- None

**Technical Debt Incurred:**

- None

---

_For current project status, see .planning/ROADMAP.md_
