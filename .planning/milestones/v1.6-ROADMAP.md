# Milestone v1.6: Final ID Cleanup

**Status:** ✅ SHIPPED 2026-01-15
**Phases:** 28-30
**Total Plans:** 5

## Overview

Eradicated all legacy mercId/dictatorId/mercName/dictatorName patterns from the codebase, leaving only combatantId/combatantName as the canonical identity properties. This completed the combatant unification work started in v1.2.

## Phases

### Phase 28: Remove Legacy Comments ✅

**Goal**: Clean up backward-compat and legacy comments from recent refactors
**Depends on**: v1.5 milestone
**Plans**: 1 plan

Plans:
- [x] 28-01: Remove legacy comments and deprecated functions from rules and UI layers

**Details:**
- Removed 10 deprecated wrapper functions from rebel-economy.ts
- Removed deprecated isBadger/isKastern functions from combat.ts
- Removed deprecated getAIMercActionPriority from ai-action-helpers.ts
- Removed mercSquad legacy property and RebelPlayer/DictatorPlayer type aliases
- Cleaned 8+ backward compat comments from Vue components

### Phase 29: Rules Layer ID Cleanup ✅

**Goal**: Replace mercId with combatantId in state types, combat utilities, and action args
**Depends on**: Phase 28
**Plans**: 2 plans

Plans:
- [x] 29-01: Update core state types (game.ts) and combat utilities (combat.ts)
- [x] 29-02: Update action layer (rebel-economy.ts, rebel-equipment.ts, day-one-actions.ts)

**Details:**
- Updated lastExplorer type from mercId to combatantId
- Updated pendingEpinephrine type fields (dyingMercId → dyingCombatantId, etc.)
- Updated pendingHitAllocation type (attackerMercId → attackerCombatantId)
- Renamed getCombatantMercId function to getCombatantId
- Updated all action followUp args to use combatantId consistently

### Phase 30: UI Layer ID Cleanup ✅

**Goal**: Replace mercName/dictatorName with combatantName in UI components
**Depends on**: Phase 29
**Plans**: 2 plans

Plans:
- [x] 30-01: Update UI component interfaces and type definitions
- [x] 30-02: Remove fallback chains and update data mappings + test fixture

**Details:**
- Updated CombatantCard.vue, MapGrid.vue, DictatorPanel.vue, SectorPanel.vue interfaces
- Removed all mercId/mercName fallback chains from computed properties
- Updated GameBoard.vue data mappings (~13 keys updated)
- Updated test fixture to use combatantId/combatantName

---

## Milestone Summary

**Key Decisions:**
- Preserved dictatorId in setup context (semantically correct - selects which dictator character)
- Preserved mercId in helpers.ts canHireMercWithTeam (MERC-specific hiring logic)
- Preserved mercId in merc-abilities.ts (MERC-specific ability lookups)
- Removed UI fallback chains completely (no saved game compatibility needed)

**Issues Resolved:**
- Eliminated all 100+ occurrences of legacy ID patterns
- Final grep verification: 0 matches for mercId|mercName|dictatorId|dictatorName

**Issues Deferred:**
None

**Technical Debt Incurred:**
None

---

_For current project status, see .planning/ROADMAP.md_
